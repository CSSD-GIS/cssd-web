(function(e){function t(t){for(var r,o,i=t[0],l=t[1],c=t[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={app:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0f9a":function(e,t){},"18f0":function(e,t,a){e.exports=a.p+"img/link.9c719b73.svg"},"1d66":function(e,t,a){"use strict";a("381a")},2017:function(e,t,a){"use strict";a("cafe")},2160:function(e,t,a){},"247f":function(e,t,a){},"2a3d":function(e,t,a){e.exports=a.p+"img/password.92a4e6d4.svg"},"30c3":function(e,t,a){e.exports=a.p+"img/example.894f4689.svg"},"381a":function(e,t,a){},"47f1":function(e,t,a){e.exports=a.p+"img/table.fe7671a5.svg"},"4ca5":function(e,t,a){},"4df5":function(e,t,a){e.exports=a.p+"img/eye.e4fe315c.svg"},"51ff":function(e,t,a){var r={"./dashboard.svg":"f782","./example.svg":"30c3","./eye-open.svg":"d7ec","./eye.svg":"4df5","./form.svg":"eb1b","./link.svg":"18f0","./nested.svg":"dcf8","./password.svg":"2a3d","./table.svg":"47f1","./tree.svg":"93cd","./user.svg":"b3b5"};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id="51ff"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=(a("f5df1"),a("b2d6")),s=a.n(n),o=a("f0d9"),i=a.n(o),l=a("5c96"),c=a.n(l),u=(a("0fae"),a("b20f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),d=[],p={name:"App"},m=p,f=a("2877"),h=Object(f["a"])(m,u,d,!1,null,null,null),g=h.exports,v=a("2f62"),w=(a("b0c0"),{sidebar:function(e){return e.app.sidebar},device:function(e){return e.app.device},token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name}}),b=w,y=a("a78e"),x=a.n(y),C={sidebar:{opened:!x.a.get("sidebarStatus")||!!+x.a.get("sidebarStatus"),withoutAnimation:!1},device:"desktop"},_={TOGGLE_SIDEBAR:function(e){e.sidebar.opened=!e.sidebar.opened,e.sidebar.withoutAnimation=!1,e.sidebar.opened?x.a.set("sidebarStatus",1):x.a.set("sidebarStatus",0)},CLOSE_SIDEBAR:function(e,t){x.a.set("sidebarStatus",0),e.sidebar.opened=!1,e.sidebar.withoutAnimation=t},TOGGLE_DEVICE:function(e,t){e.device=t}},k={toggleSideBar:function(e){var t=e.commit;t("TOGGLE_SIDEBAR")},closeSideBar:function(e,t){var a=e.commit,r=t.withoutAnimation;a("CLOSE_SIDEBAR",r)},toggleDevice:function(e,t){var a=e.commit;a("TOGGLE_DEVICE",t)}},T={namespaced:!0,state:C,mutations:_,actions:k},S=a("83d6"),D=a.n(S),O=D.a.showSettings,L=D.a.fixedHeader,R=D.a.sidebarLogo,j={showSettings:O,fixedHeader:L,sidebarLogo:R},E={CHANGE_SETTING:function(e,t){var a=t.key,r=t.value;e.hasOwnProperty(a)&&(e[a]=r)}},P={changeSetting:function(e,t){var a=e.commit;a("CHANGE_SETTING",t)}},q={namespaced:!0,state:j,mutations:E,actions:P},N=a("0f9a"),A=a.n(N);r["default"].use(v["a"]);var $=new v["a"].Store({modules:{app:T,settings:q,user:A.a},getters:b,state:{tcolor:"pure"},mutations:{setTColor:function(e,t){this.state.themecolor=t}}}),z=$,F=a("8c4f"),I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clear"},[a("div",{staticClass:"top"},[e._m(0),a("span",{staticClass:"titleName"},[e._v("课堂学生状态检测系统")]),a("router-link",{attrs:{to:{path:"/views/realTime",query:{name:"detection"}}}},[a("el-dropdown",{attrs:{placement:"bottom"}},[a("span",{ref:"echarType",staticClass:"realTime"},[e._v(" 检测画面"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"0"}}}},[a("el-dropdown-item",[e._v("信息工程学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"1"}}}},[a("el-dropdown-item",[e._v("应急管理学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"2"}}}},[a("el-dropdown-item",[e._v("地球科学学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"3"}}}},[a("el-dropdown-item",[e._v("生态环境学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"4"}}}},[a("el-dropdown-item",[e._v("土木工程学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"5"}}}},[a("el-dropdown-item",[e._v("地质工程学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"6"}}}},[a("el-dropdown-item",[e._v("经济管理学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"7"}}}},[a("el-dropdown-item",[e._v("文化与传播学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"8"}}}},[a("el-dropdown-item",[e._v("外国语学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"9"}}}},[a("el-dropdown-item",[e._v("马克思主义学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"10"}}}},[a("el-dropdown-item",[e._v("电子科学与控制工程学院")])],1)],1)],1)],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{name:"realTime"}}}},[a("el-dropdown",{attrs:{placement:"top"}},[a("span",{ref:"echarType",staticClass:"realTime"},[e._v(" 实时画面"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"0"}}}},[a("el-dropdown-item",[e._v("信息工程学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"1"}}}},[a("el-dropdown-item",[e._v("应急管理学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"2"}}}},[a("el-dropdown-item",[e._v("地球科学学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"3"}}}},[a("el-dropdown-item",[e._v("生态环境学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"4"}}}},[a("el-dropdown-item",[e._v("土木工程学院")])],1),a("router-link",{attrs:{to:{path:"/viewsrealTime",query:{id:"5"}}}},[a("el-dropdown-item",[e._v("地质工程学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"6"}}}},[a("el-dropdown-item",[e._v("经济管理学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"7"}}}},[a("el-dropdown-item",[e._v("文化与传播学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"8"}}}},[a("el-dropdown-item",[e._v("外国语学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"9"}}}},[a("el-dropdown-item",[e._v("马克思主义学院")])],1),a("router-link",{attrs:{to:{path:"/views/realTime",query:{id:"10"}}}},[a("el-dropdown-item",[e._v("电子科学与控制工程学院")])],1)],1)],1)],1),a("router-link",{attrs:{to:"/views/show"}},[a("el-dropdown",[a("span",{ref:"echarType",staticClass:"showChart"},[e._v(" 结果展示"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])])],1),a("span",{staticClass:"showTime"},[e._v(e._s(e.showTime))]),a("router-view")],1)])},M=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"img"},[a("span",{staticClass:"img1"})])}],G=(a("d3b7"),a("25f0"),a("bc3a")),B=a.n(G),H="token";function U(){return x.a.get(H)}var W=B.a.create({baseURL:"/",timeout:5e3});W.interceptors.request.use((function(e){return z.getters.token&&(e.headers["X-Token"]=U()),e}),(function(e){return console.log(e),Promise.reject(e)})),W.interceptors.response.use((function(e){var t=e.data;return 2e4!==t.code?(50008!==t.code&&50012!==t.code&&50014!==t.code||l["MessageBox"].confirm("You have been logged out, you can cancel to stay on this page, or log in again","Confirm logout",{confirmButtonText:"Re-Login",cancelButtonText:"Cancel",type:"warning"}).then((function(){z.dispatch("user/resetToken").then((function(){location.reload()}))})),Promise.reject(new Error(t.message||"Error"))):t}),(function(e){return Promise.reject(e)}));var V=W;function J(e){return V({url:"/api/api/v1/test",method:"get",params:{token:e}})}var Y={data:function(){return{logoPath:a("9905"),showTime:""}},mounted:function(){var e=this,t=localStorage.getItem("token");t?J(t).then((function(t){console.log(t),alert(t),e.$router.push("/main")})).catch((function(t){console.log(t),e.$message.error(t.response.data.msg),e.$router.push("/login")})):this.$router.push("/login"),this.time(),this.timer=setInterval((function(){e.time(new Date)}),500)},destroyed:function(){this.timer&&clearInterval(this.timer)},methods:{time:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate(),n=e.getHours().toString(),s=e.getMinutes().toString(),o=e.getSeconds().toString(),i=n.length<2?"0"+n:n,l=s.length<2?"0"+s:s,c=o.length<2?"0"+o:o;this.showTime=t+"年"+a+"月"+r+"日"+i+":"+l+":"+c}}},X=Y,K=(a("ee9a"),Object(f["a"])(X,I,M,!1,null,null,null)),Q=K.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bgimg"},[a("div",{staticClass:"login-container"},[a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on","label-position":"left"}},[a("div",{staticClass:"title-container"},[a("h3",{staticClass:"title"},[e._v("系统登录")])]),a("el-form-item",{attrs:{prop:"username"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"user"}})],1),a("el-input",{ref:"username",attrs:{placeholder:"Username",name:"username",type:"text",tabindex:"1","auto-complete":"on"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{prop:"password"}},[a("span",{staticClass:"svg-container"},[a("svg-icon",{attrs:{"icon-class":"password"}})],1),a("el-input",{key:e.passwordType,ref:"password",attrs:{type:e.passwordType,placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLogin(t)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}}),a("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[a("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1),a("el-button",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handLogin(t)}}},[e._v("Login")])],1)],1),e._m(0)])},ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"systen-title"},[a("h1",[e._v("CSSD")]),a("h2",[e._v("课堂学生状态检测系统")])])}];a("498a");function te(e){var t=["admin","editor"];return t.indexOf(e.trim())>=0}var ae={name:"Login",data:function(){var e=function(e,t,a){te(t)?a():a(new Error("Please enter the correct user name"))},t=function(e,t,a){t.length<6?a(new Error("The password can not be less than 6 digits")):a()};return{loginForm:{username:"lingyin",password:"123456"},loginRules:{username:[{required:!0,trigger:"blur",validator:e}],password:[{required:!0,trigger:"blur",validator:t}]},loading:!1,passwordType:"password",redirect:void 0,token:""}},methods:{showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))},handLogin:function(){var e=this,t=this,r=a("6c27").sha256,n=r(this.loginForm.username),s=r(this.loginForm.password);B.a.post("/api/login",this.$qs.stringify({username:n,password:s})).then((function(a){if(console.log(a),200===a.data.code){var r=a.data.data.token;localStorage.setItem("token",r),t.$router.push("/main")}20003===a.data.code&&e.$message.error(a.data.msg)})).catch((function(e){console.log(e)}))}}},re=ae,ne=(a("2017"),a("1d66"),Object(f["a"])(re,Z,ee,!1,null,"21a99180",null)),se=ne.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"view"},[a("div",{staticClass:"room"},[a("dv-border-box-11",{staticClass:"dv-border-box-11",attrs:{title:e.collegeName}},[a("el-table",{ref:"multipleTable",staticClass:"elTable",attrs:{height:"80%","cell-style":e.cellStyle,align:"center",data:e.coursesData,"tooltip-effect":"dark","empty-text":"暂无进行中的课程"},on:{select:e.itemHandleSelectionChange}},[a("el-table-column",{attrs:{label:"课程名称",align:"center",width:"150",prop:"courseName"}}),a("el-table-column",{attrs:{label:"教室号",width:"120",align:"center",prop:"courseRoom"}}),a("el-table-column",{attrs:{label:"监控设备",width:"120",align:"center",prop:"camera"}})],1)],1),a("dv-border-box-8",{staticClass:"dv-border-box-8"},[a("dv-decoration-7",{staticClass:"dv-decoration-7"},[e._v(" 实时分析结果")]),a("marquee",{staticClass:"content1",attrs:{width:"100%",height:"400px",direction:"up",behavior:"scroll",scrolldelay:"10000",scrollamount:"250","on-mouse-out":"this.start()","on-mouse-over":"this.stop()"}},e._l(e.analyseResults,(function(t){return a("div",{key:t.Classroom,staticClass:"text"},[a("div",{attrs:{id:"analyse_results"}},[a("div",{staticClass:"classId"},[e._v(" "+e._s(t.Classroom)+" ")]),a("div",{staticClass:"rightbox"},[a("span",{staticClass:"lineTwo"},[a("span",{staticClass:"className"},[e._v(" "+e._s(e.classCourse[t.Classroom])+" ")]),a("span",{staticClass:"badNum"},[e._v(" 玩手机人数："),a("span",{staticClass:"fontColor"},[e._v(e._s(t.PlayingNum)+" ")]),e._v(" 睡觉人数："),a("span",{staticClass:"fontColor"},[e._v(e._s(t.SleepingNum)+" ")])])]),a("span",{staticClass:"goodNum"},[e._v(" 做笔记人数："),a("span",{staticClass:"fontColor2"},[e._v(e._s(t.WritingNum)+" ")]),e._v(" 听课人数："),a("span",{staticClass:"fontColor3"},[e._v(e._s(t.ListeningNum)+" ")])])])]),a("div",{staticClass:"link-top"})])})),0)],1)],1),a("div",{staticClass:"camera"},[a("dv-border-box-11",{attrs:{title:"教室监控实时画面"}},[a("div",{staticClass:"videoBox"},e._l(e.imgsUrl,(function(t){return a("el-image",{key:t.url,staticClass:"imgsize",attrs:{src:t.url,"preview-src-list":e.srcList}})})),1)])],1)])},ie=[],le=a("b85c"),ce=a("1da1"),ue=(a("96cf"),a("a15b"),a("99af"),a("a434"),a("f763")),de=[],pe={},me={name:"RealTime",data:function(){return{judge:!0,demoImg:"".concat(ue.cssd_trans,"/images/demo2.jpg"),analyseResults:[],checked:!0,showPic:!1,floor:"",floorName:"",checkAll:!1,classval:de,checkList:[],uri:"",items:pe,num:1,img:"",floorData:[],collegeName:"信息工程学院",colleges:["信息工程学院","应急管理学院"],coursesData:[],classrooms:"",classCourse:{},imgsUrl:[],srcList:[]}},watch:{$route:function(e,t){for(var a=this.$route.query.id,r=0;r<6;r++)if(a===r){this.showPIc=!0,this.collegeName=this.college[r];break}var n=this.$route.query.name;"detection"===n&&(this.judge=!1,this.getData()),"realTime"===n&&(this.judge=!0,this.getData())}},mounted:function(){this.getData(),0===this.classrooms.length&&setTimeout(this.startPridect,3e3),setInterval(this.getData,3e4),this.getHlsIP("rtsp://admin:123456@10.128.98.159:554/h264/ch1/main/av_stream")},methods:{getData:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,o,i,l,c,u,d,p,m,f,h,g,v,w,b,y,x;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("".concat(ue.cssd_trans,"/api/v1/getCoursesData"));case 2:a=t.sent,r=a.data.data,n=[],s=Object(le["a"])(r);try{for(s.s();!(o=s.n()).done;)i=o.value,n.push(i.CourseRoom)}catch(C){s.e(C)}finally{s.f()}return e.classrooms=n.join(","),t.next=10,e.getHealthInfo();case 10:l=t.sent,c={},u=Object(le["a"])(l);try{for(u.s();!(d=u.n()).done;)p=d.value,c[p.className]=p.isOnline}catch(C){u.e(C)}finally{u.f()}return t.next=16,e.getResults();case 16:return e.analyseResults=t.sent,t.next=19,e.getLatestFrame();case 19:m=t.sent,e.imgsUrl=[],e.srcList=[],f=Object(le["a"])(m);try{for(f.s();!(h=f.n()).done;)g=h.value,v={},v["url"]="".concat(ue.cssd_trans).concat(g.Url),v["classroom"]=g.Classroom,e.imgsUrl.push(v),e.srcList.push("".concat(ue.cssd_trans).concat(g.Url))}catch(C){f.e(C)}finally{f.f()}e.getCameraIP(),e.coursesData=[],w=Object(le["a"])(r);try{for(w.s();!(b=w.n()).done;)y=b.value,x={},x["courseName"]=y.CourseName,x["courseRoom"]=y.CourseRoom,x["camera"]="1"===c[y.CourseRoom]?"在线":"离线",e.coursesData.push(x),e.classCourse[y.CourseRoom]=y.CourseName}catch(C){w.e(C)}finally{w.f()}case 28:case"end":return t.stop()}}),t)})))()},startPridect:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("classrooms",e.classrooms),t.next=4,B()({method:"post",url:"".concat(ue.cssd_trans,"/api/v1/start"),data:a});case 4:r=t.sent,e.$message({message:r.data.data.data,type:"success"});case 6:case"end":return t.stop()}}),t)})))()},getHealthInfo:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("classrooms",e.classrooms),t.next=4,B()({method:"post",url:"".concat(ue.cssd_trans,"/api/v1/healthcheck"),data:a});case 4:return r=t.sent,t.abrupt("return",r.data.data);case 6:case"end":return t.stop()}}),t)})))()},getResults:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("classrooms",e.classrooms),t.next=4,B()({method:"post",url:"".concat(ue.cssd_trans,"/api/v1/getResults"),data:a});case 4:return r=t.sent,t.abrupt("return",r.data.data);case 6:case"end":return t.stop()}}),t)})))()},getLatestFrame:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("classrooms",e.classrooms),t.next=4,B()({method:"post",url:"".concat(ue.cssd_trans,"/api/v1/getLatestFrame"),data:a});case 4:return r=t.sent,t.abrupt("return",r.data.data);case 6:case"end":return t.stop()}}),t)})))()},getCameraIP:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,a.append("classrooms",e.classrooms),t.next=4,B()({method:"post",url:"".concat(ue.cssd_trans,"/api/v1/parse"),data:a});case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},getHlsIP:function(e){var t=this;return Object(ce["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,B()({method:"post",url:"".concat(ue.rh,"/start"),data:{uri:e}});case 2:r=a.sent,t.uri="".concat(ue.rh)+r.data.uri;case 4:case"end":return a.stop()}}),a)})))()},itemHandleSelectionChange:function(e,t){if(this.checkList.length<=9){var a=e.length&&-1!==e.indexOf(t);!0===a?this.checkList.push(t.className):this.checkList.splice(this.checkList.indexOf(t.className),1)}else alert("成功")},cellStyle:function(e){return"监控设备"===e.column.label&&"在线"===e.row.camera?"color:#25f52b":"监控设备"===e.column.label&&"离线"===e.row.camera?"color:#ff1111":void 0}},destroyed:function(){B.a.get("".concat(ue.cssd_trans,"/api/v1/stop"))}},fe=me,he=(a("ed1f"),Object(f["a"])(fe,oe,ie,!1,null,null,null)),ge=he.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("el-table",{staticClass:"table",attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"CreatedAt",label:"时间",width:"200"}}),a("el-table-column",{attrs:{prop:"Classroom",label:"教室号",width:"160"}}),a("el-table-column",{attrs:{prop:"PlayingNum",label:"玩手机人数",width:"140"}}),a("el-table-column",{attrs:{prop:"SleepingNum",label:"睡觉人数",width:"140"}}),a("el-table-column",{attrs:{prop:"WritingNum",label:"记笔记人数",width:"140"}}),a("el-table-column",{attrs:{prop:"ListeningNum",label:"听课人数",width:"140"}})],1),a("div",{staticClass:"chart1",attrs:{id:"myChart1"}}),a("div",{staticClass:"chart2",attrs:{id:"myChart2"}}),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"prev-text":"上一页","next-text":"下一页","pager-count":5,"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, prev, pager, next, jumper",total:200},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},we=[],be=(a("4e82"),{data:function(){return{showlist:[],pagesize:9,currentPage:1,tableData:[],carouseData:{},timeLineData:[],pieChartData:[{value:0,name:"玩手机"},{value:0,name:"睡觉"},{value:0,name:"记笔记"},{value:0,name:"听课"}]}},mounted:function(){this.getTableData(),this.getCarouselData();var e=this;(this.carouseData.length<=0||this.timeLineData<=0)&&setTimeout((function(){e.histoGram(),e.pieChart()}),2e3),this.histoGram(),this.pieChart()},methods:{getTableData:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("".concat(ue.cssd_trans,"/api/v1/getResultsByOffset?offset=").concat((e.currentPage-1)*e.pagesize,"&limit=").concat(e.pagesize));case 2:a=t.sent,e.tableData=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},getCarouselData:function(){var e=this;return Object(ce["a"])(regeneratorRuntime.mark((function t(){var a,r,n,s,o,i,l,c,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.a.get("".concat(ue.cssd_trans,"/api/v1/getAVGResults"));case 2:a=t.sent,e.carouseData={},e.timeLineData=[],r=0,n=0,s=0,o=0,i=Object(le["a"])(a.data.data);try{for(i.s();!(l=i.n()).done;)c=l.value,u=[],u.push(Math.ceil(c.AvgP)),u.push(Math.ceil(c.AvgS)),u.push(Math.ceil(c.AvgW)),u.push(Math.ceil(c.AvgL)),e.carouseData[c.Classroom]=u,e.timeLineData.push(c.Classroom),r+=Math.ceil(c.AvgP),n+=Math.ceil(c.AvgS),s+=Math.ceil(c.AvgW),o+=Math.ceil(c.AvgL)}catch(d){i.e(d)}finally{i.f()}e.sumAVGData(r,n,s,o);case 12:case"end":return t.stop()}}),t)})))()},sumAVGData:function(e,t,a,r){this.pieChartData[0].value=e,this.pieChartData[1].value=t,this.pieChartData[2].value=a,this.pieChartData[3].value=r},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(){var e=Object(ce["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.currentPage=t,e.next=3,this.getTableData();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),histoGram:function(){for(var e=this,t=this.$echarts.init(document.getElementById("myChart1")),a={title:{x:"center",textStyle:{color:"#fff",fontSize:"22"}},timeline:{show:!0,axisType:"category",autoPlay:!0,playInterval:5e3,lineStyle:{show:!0,color:"#20dbfd"},controlStyle:{show:!0,color:"#20dbfd",borderColor:"#20dbfd"},left:"0",right:"0",bottom:"0",padding:[15,0],data:e.timeLineData},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"2%",right:"4%",bottom:"14%",top:"16%",containLabel:!0},xAxis:{type:"category",data:["玩手机","睡觉","做笔记","听讲"],axisTick:{show:!1},axisLine:{lineStyle:{color:"#25c3da"}},axisLabel:{textStyle:{color:"#fff",fontSize:"18px"}}},yAxis:{name:"数量",type:"value",axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#25c3da"}},splitLine:{show:!0,lineStyle:{color:"#2c3d89",type:"dotted"}},axisLabel:{textStyle:{color:"#fff",fontSize:"18px"}}},options:[]},r=0;r<e.timeLineData.length;r++)a.options.push({title:{text:e.timeLineData[r]+"学生状态分析结果"},series:[{name:"数量",type:"bar",barWidth:"20%",itemStyle:{normal:{color:e.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#8efbff"},{offset:1,color:"#4b85fb"}]),barBorderRadius:[12,12,0,0]}},data:e.carouseData[e.timeLineData[r]]}]});t.setOption(a),window.addEventListener("resize",(function(){t.resize()}))},pieChart:function(){var e=this.$echarts.init(document.getElementById("myChart2"));e.setOption({calculable:!1,legend:{orient:"vertical",x:"left",y:"200",padding:10,itemGap:20,textStyle:{color:"#c3cad9",fontSize:"15px"}},title:{text:"课堂行为检测总结果展示",left:"center",top:20,textStyle:{color:"#fff",fontSize:"22"}},tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"},visualMap:{show:!1,min:500,max:600,inRange:{}},series:[{axisLabel:{textStyle:{color:"#fff",fontSize:"30px"}},type:"pie",radius:"45%",selectedMode:"single",selectedOffset:10,clockwise:!0,center:["56%","56%"],color:["#330099","#3893e5","#FCC708","#03B48E"],data:this.pieChartData.sort((function(e,t){return e.value-t.value})),label:{normal:{textStyle:{fontSize:"18",color:"#fff"},rich:{b:{color:"#d9efff",fontSize:15,height:40},c:{color:"#fff",fontSize:14,fontWeight:"bold",lineHeight:5}}}},itemStyle:{borderWidth:"20",color:"pink",borderColor:"#FFF",normal:{}},labelLine:{normal:{backgroundColor:"yellow",borderColor:"skyblue",borderWidth:10,lineStyle:{borderColor:"skyblue",borderWidth:10,backgroundColor:"yellow"}}}}]}),window.addEventListener("resize",(function(){e.resize()}))}}}),ye=be,xe=(a("5de7"),a("c030"),Object(f["a"])(ye,ve,we,!1,null,"e9e7dbbc",null)),Ce=xe.exports;r["default"].use(F["a"]);var _e=[{path:"/",redirect:"/main"},{path:"/login",name:"login",component:se,meta:{title:"登陆界面",hasSubMenu:!0}},{path:"/main",name:"menu",component:Q,meta:{title:"导航栏",hasSubMenu:!1},children:[{path:"/views/realTime",name:"time",component:ge,meta:{title:"实时画面",icon:"el-icon-user-solid",hasSubMenu:!0}},{path:"/views/show",name:"Show",component:Ce,meta:{title:"展示",hasSubMenu:!1}}]}],ke=new F["a"]({routes:_e}),Te=(a("985d"),a("4ca5"),a("b383")),Se=a.n(Te),De=a("6c29"),Oe=a("313e");r["default"].use(c.a,{zhLocale:i.a}),r["default"].prototype.$qs=Se.a,r["default"].use(De["a"]),r["default"].use(De["b"]),r["default"].use(De["c"]),r["default"].use(De["d"]),r["default"].prototype.$echarts=Oe,r["default"].use(c.a,{locale:s.a}),r["default"].config.productionTip=!1,new r["default"]({el:"#app",router:ke,store:z,render:function(e){return e(g)}})},"5de7":function(e,t,a){"use strict";a("247f")},"69ae":function(e,t,a){},"83d6":function(e,t){e.exports={title:"Vue Admin Template",fixedHeader:!1,sidebarLogo:!1}},"8e07":function(e,t,a){},"93cd":function(e,t,a){e.exports=a.p+"img/tree.59ecebc1.svg"},"985d":function(e,t,a){a("d81d"),a("d3b7"),a("ddb0");var r=a("51ff"),n=function(e){return e.keys().map(e)};n(r)},9905:function(e,t,a){e.exports=a.p+"img/person.d3bb44a6.svg"},b20f:function(e,t,a){e.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}},b3b5:function(e,t,a){e.exports=a.p+"img/user.9f469d0b.svg"},c030:function(e,t,a){"use strict";a("8e07")},cafe:function(e,t,a){},d7ec:function(e,t,a){e.exports=a.p+"img/eye-open.26bf09f4.svg"},dcf8:function(e,t,a){e.exports=a.p+"img/nested.c948fb38.svg"},eb1b:function(e,t,a){e.exports=a.p+"img/form.f3ed6fee.svg"},ed1f:function(e,t,a){"use strict";a("69ae")},ee9a:function(e,t,a){"use strict";a("2160")},f763:function(e){e.exports=JSON.parse('{"rr":"rtsp://172.17.130.166:8554","rh":"http://172.17.130.166:8083","cssd_trans":"http://172.17.130.166:8082","cssd_admin":"http://172.17.130.166:8081"}')},f782:function(e,t,a){e.exports=a.p+"img/dashboard.28a2a850.svg"}});
//# sourceMappingURL=app.33b1c52f.js.map